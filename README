This "OPTOOLS" folder contains miscellaneous simulation / analysis tools of image sequences. 
It was initially set up to investigate anomalies in phase speeds estimated from Sentinel-2 B02-B04 pairs, 
as described in Ardhuin et al. (JGR 2021). 

Some of the matlab code was later modified to contribute to the design of STREAM-O (proposal to ESA EE11). 
More documentation and details should follow, as well as a properly version-controlled git depot on gitlab.ifremer.fr

F. Ardhuin, LOPS, March 3, 2022


----------------------------------------------------------------------
Contents: 

MATLAB folder contains some of the original codes, in particular you can 

I) test the principle of 3-image method using 1D data and Monte-Carlo simulations to check for averaging effect and random errors
opposite_test

II) Simulate some satellite images and analyze the phase speeds

1. define wave spectrum (here using buoy data) and wind and current ... 
[Efth,freq,dir2]=define_spectrum;

U10=6;
Udir=40.*d2r; % direction to, trig. convention 
Ux=0;
Uy=0;

2. simulate images , for example 

phitrig =[  148.1901  148.8061  149.4561  149.4561];
offspec=[8.9740    9.0674    9.1693    9.1693];
theta=[6.2804    6.2413    6.2114    6.2114];
imgtimes=[0 0.5 1 1];
[img1, img2, img3, img4,  nx, ny, x, y, dx, dy  ] =   S2_simu(Efth,freq,dir2,U10,Udir,Ux,Uy,imgtimes,offspec,phitrig,theta,10,801 ,1000,0.  ,0.,0.15,1);


3.a 
S2_3ana : this is the 3-image method of Ardhuin et al. (2021) : this is super-slow.

3.b
S2_analysis  : standard 2-image phase difference method

III) Read a piece of Sentinel 2 imagery and do the same kind of analysis

1. load image (here this is just a small piece to make the tar not too big)
load S2img   

2. Run analysis 

2.a 
S2_3ana : this is the 3-image method of Ardhuin et al. (2021) : this is super-slow.




